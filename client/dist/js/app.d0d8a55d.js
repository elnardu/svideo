(function(t){function e(e){for(var n,a,o=e[0],l=e[1],u=e[2],d=0,p=[];d<o.length;d++)a=o[d],i[a]&&p.push(i[a][0]),i[a]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);c&&c(e);while(p.length)p.shift()();return r.push.apply(r,u||[]),s()}function s(){for(var t,e=0;e<r.length;e++){for(var s=r[e],n=!0,o=1;o<s.length;o++){var l=s[o];0!==i[l]&&(n=!1)}n&&(r.splice(e--,1),t=a(a.s=s[0]))}return t}var n={},i={1:0},r=[];function a(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=t,a.c=n,a.d=function(t,e,s){a.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:s})},a.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var c=l;r.push([8,0]),s()})({1:function(t,e){},"2Zml":function(t,e,s){},5:function(t,e){},8:function(t,e,s){t.exports=s("Vtdi")},FC4I:function(t,e,s){"use strict";var n=s("d7H4"),i=s.n(n);i.a},I5h5:function(t,e,s){"use strict";var n=s("2Zml"),i=s.n(n);i.a},Radg:function(t,e,s){},Vtdi:function(t,e,s){"use strict";s.r(e);s("VRzm");var n=s("Kw5r"),i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container-fluid",attrs:{id:"app"}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-7 col-sm-7 col-md-9 col-xl-10 p-0"},[s("VideoWrapper",{attrs:{video:t.video},on:{setVideoTime:t.setVideoTime}})],1),s("div",{staticClass:"col-5 col-sm-5 col-md-3 col-xl-2 d-flex flex-column justify-content-between"},[s("Control",{attrs:{socket:t.socket,video:t.video}}),s("Chat",{attrs:{socket:t.socket}})],1)])])},r=[],a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"chat mt-3 d-flex flex-column justify-content-between"},[s("div",{staticClass:"messages",attrs:{id:"messages"}},[s("div",{staticClass:"scroll-content"},t._l(t.messages,function(e,n){return s("div",{key:n,staticClass:"message",class:{server:e.server}},[e.server?t._e():s("span",[t._v(t._s(e.from)+": ")]),t._v(t._s(e.text)+"\n      ")])}))]),t.logged?t._e():s("form",{staticClass:"my-2",on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control w-100",attrs:{type:"text",placeholder:"Username"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),s("button",{staticClass:"btn btn-primary mt-1 w-100",attrs:{type:"submit"}},[t._v("Enter chat")])]),t.logged?s("form",{staticClass:"my-2 message-form",on:{submit:function(e){return e.preventDefault(),t.send(e)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],staticClass:"form-control w-100",attrs:{type:"text",placeholder:"Message"},domProps:{value:t.text},on:{input:function(e){e.target.composing||(t.text=e.target.value)}}}),s("button",{staticClass:"btn btn-success mt-1 w-100",attrs:{type:"submit"}},[t._v("Send")])]):t._e()])},o=[],l=(s("f3/d"),{props:["socket"],data:function(){return{logged:!1,name:"",text:"",messages:[],notificationSound:{}}},mounted:function(){var t=this;this.socket.on("message",function(e){t.messages.push(e),setTimeout(function(){var t=document.getElementById("messages");t.scrollTop=t.scrollHeight+100},250)}),setTimeout(function(){document.getElementById("messages").setAttribute("style","height:"+document.getElementById("messages").offsetHeight+"px !important")},1e3),this.socket.on("reconnect",function(){t.socket.emit("setName",t.name)})},methods:{login:function(){this.name&&(this.logged=!0,this.socket.emit("setName",this.name))},send:function(){this.text&&(this.socket.emit("message",{from:this.name,text:this.text}),this.text="")}}}),u=l,c=(s("FC4I"),s("KHd+")),d=Object(c["a"])(u,a,o,!1,null,"1cb2216b",null),p=d.exports,m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"videoWrapper"}},["default"===t.video.type?s("VideoDefault",{attrs:{time:t.video.time,url:t.video.url,paused:t.video.paused}}):t._e(),"youtube"===t.video.type?s("VideoYoutube",{attrs:{time:t.video.time,url:t.video.url,paused:t.video.paused}}):t._e()],1)},f=[],h=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},v=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"d-flex justify-content-center align-items-center",attrs:{id:"yplayer-container"}},[s("div",{attrs:{id:"yplayer"}})])}],y=s("D+Oc"),g=s.n(y),b={props:["time","url","paused"],data:function(){return{player:{}}},mounted:function(){this.player=g()("yplayer"),this.player.loadVideoById(this.url.slice(-11),0,"large"),this.player.seekTo(this.time),this.paused?this.player.pauseVideo():this.player.playVideo()},destroyed:function(){this.player.destroy()},watch:{url:function(){this.player.loadVideoById(this.url.slice(-11),0)},time:function(){var t=this;this.player.getCurrentTime().then(function(e){Math.abs(t.time-e)>5&&t.player.seekTo(t.time)})},paused:function(){this.paused?this.player.pauseVideo():this.player.playVideo()}}},C=b,_=(s("I5h5"),Object(c["a"])(C,h,v,!1,null,null,null)),x=_.exports,w=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},k=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"d-flex justify-content-center align-items-center",attrs:{id:"videojs-container"}},[s("video",{staticClass:"video-js vjs-default-skin vjs-big-play-centered",attrs:{id:"videojs"}})])}],V=s("PTN7"),j=s.n(V),T={props:["time","url","paused"],mounted:function(){this.player=j()("videojs",{controls:!0,autoplay:!1,preload:"auto",techOrder:["html5"],sources:[]}),this.player.show(),this.player.src({type:"video/mp4",src:this.url}),this.player.currentTime(this.time),this.paused?this.player.pause():this.player.play()},destroyed:function(){this.player.dispose()},watch:{url:function(){this.player.src({type:"video/mp4",src:this.url})},time:function(){Math.abs(this.time-this.player.currentTime())>3&&this.player.currentTime(this.time)},paused:function(){this.paused?this.player.pause():this.player.play()}}},F=T,E=(s("WPpC"),Object(c["a"])(F,w,k,!1,null,null,null)),O=E.exports,P={props:["video"],components:{VideoYoutube:x,VideoDefault:O}},S=P,I=(s("XFiC"),Object(c["a"])(S,m,f,!1,null,null,null)),$=I.exports,L=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mt-3 w-100 control"},[s("form",{staticClass:"input-group",on:{submit:function(e){return e.preventDefault(),t.changeVideo(e)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.url,expression:"url"}],staticClass:"form-control",attrs:{type:"text",id:"inlineFormInput",placeholder:t.video.url?t.video.url:"Paste your url here"},domProps:{value:t.url},on:{input:function(e){e.target.composing||(t.url=e.target.value)}}}),t._m(0)]),s("div",{staticClass:"btn-group mt-2 w-100"},[t.video.paused?s("button",{staticClass:"btn btn-success w-100",attrs:{type:"button",name:"button"},on:{click:t.play}},[s("i",{staticClass:"fa fa-play",attrs:{"aria-hidden":"true"}})]):s("button",{staticClass:"btn btn-danger w-100",attrs:{type:"button",name:"button"},on:{click:t.pause}},[s("i",{staticClass:"fa fa-pause",attrs:{"aria-hidden":"true"}})]),s("button",{staticClass:"btn btn-light w-100",attrs:{type:"button",name:"button"},on:{click:t.toggleFullScreen}},[s("i",{staticClass:"fa fa-arrows-alt",attrs:{"aria-hidden":"true"}})]),s("button",{staticClass:"btn btn-light w-100",attrs:{type:"button",name:"button"},on:{click:t.toggleUsersList}},[s("i",{staticClass:"fa fa-users",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.users.length))])]),t.usersListVisible?s("div",{staticClass:"usersList mt-1"},[s("ul",{staticClass:"list-group"},t._l(t.users,function(e,n){return s("li",{key:n,staticClass:"list-group-item"},[t._v(t._s(e))])}))]):t._e()])},q=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[s("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}})])])}],M={props:["socket","video"],data:function(){return{url:"",users:[],usersListVisible:!1}},mounted:function(){var t=this;this.socket.on("users",function(e){t.users=e.map(function(t){return t||"Кто-то"}),console.log(t.users)})},methods:{changeVideo:function(){this.url&&this.socket.emit("setUrl",this.url)},pause:function(){this.socket.emit("pause")},play:function(){this.socket.emit("play")},toggleFullScreen:function(){if(this.fullscreenToggled)document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen(),this.fullscreenToggled=!1;else{var t=document.getElementById("app");t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen(),this.fullscreenToggled=!0}},toggleUsersList:function(){this.usersListVisible=!this.usersListVisible}}},R=M,B=(s("XTTu"),Object(c["a"])(R,L,q,!1,null,null,null)),D=B.exports,N=s("gFX4"),z=s.n(N),H={name:"app",components:{Chat:p,VideoWrapper:$,Control:D},data:function(){return{video:{paused:!0,type:"",time:0,url:""}}},created:function(){var t=this;this.socket=z()(),this.socket.on("video",function(e){console.log(e),t.$set(t,"video",e)})},methods:{setVideoTime:function(){}}},W=H,X=(s("ZL7j"),Object(c["a"])(W,i,r,!1,null,null,null)),U=X.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(t){return t(U)}}).$mount("#app")},WPpC:function(t,e,s){"use strict";var n=s("Radg"),i=s.n(n);i.a},XFiC:function(t,e,s){"use strict";var n=s("bp1d"),i=s.n(n);i.a},XTTu:function(t,e,s){"use strict";var n=s("hG7q"),i=s.n(n);i.a},ZL7j:function(t,e,s){"use strict";var n=s("bP1M"),i=s.n(n);i.a},bP1M:function(t,e,s){},bp1d:function(t,e,s){},d7H4:function(t,e,s){},hG7q:function(t,e,s){}});
//# sourceMappingURL=app.d0d8a55d.js.map